---
import MainLayout from "./MainLayout.astro";
import { formatDate } from "../js/utils";
import RelatedArticles from "../components/RelatedArticles.astro";
import TableOfContents from "../components/TableOfContents.astro";

const { frontmatter, headings } = Astro.props;
const { title, category, publishDate, updateDate } = frontmatter;
---

<MainLayout {title}>
  <article>
    <hgroup>
      <h1>{title}</h1>
      <p>First posted on {formatDate(publishDate)}{updateDate && ` â€” last updated on ${formatDate(updateDate)}`}</p>
    </hgroup>

    <TableOfContents {headings} />

    <slot />

    <RelatedArticles {category} {title} />
  </article>
</MainLayout>

<style lang="scss">
  hgroup {
    text-align: center;
    margin-bottom: 48px;

    h1 {
      font-size: var(--fs-56px);
      margin-bottom: 0.5rem;
      text-wrap: balance;

      @media (max-width: 768px) {
        font-size: var(--fs-32px);
      }
    }

    p {
      font-size: var(--fs-14px);
      text-wrap: balance;
    }
  }
</style>
